<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meal Finder</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>
<body class="bg-gray-50">

  <!-- Navbar -->
  <header class="bg-orange-600 p-4 flex justify-between items-center text-white">
    <h1 class="text-lg font-bold flex items-center gap-2">
      <i class="bi bi-house-door"></i> MEAL FINDER
    </h1>
    <div class="flex gap-2">
      <input id="searchInput" type="text" placeholder="Search recipes here ..." 
        class="px-3 py-1 rounded-full text-black w-48">
      <button id="searchBtn" class="bg-white text-orange-600 px-3 py-1 rounded-full">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-[url('https://www.themealdb.com/images/media/meals/58oia61564916529.jpg')] bg-cover bg-center h-52 flex flex-col items-center justify-center text-white">
    <h2 class="text-2xl font-bold">What are your favorite cuisines?</h2>
    <p class="text-sm">PERSONALIZE YOUR EXPERIENCE</p>
  </section>

  <!-- Categories -->
  <section class="p-6">
    <h2 class="text-xl font-bold mb-4">CATEGORIES</h2>
    <div id="categories" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
  </section>

  <!-- Meals -->
  <section class="p-6">
    <h2 class="text-xl font-bold mb-4">MEALS</h2>
    <div id="meals" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
  </section>

  <!-- Meal Details -->
  <section id="mealDetails" class="p-6 hidden">
    <h2 class="text-xl font-bold mb-4">MEAL DETAILS</h2>
    <div id="mealContent" class="bg-white shadow rounded-lg p-4"></div>
    <button onclick="mealDetailsEl.classList.add('hidden')" 
      class="mt-4 px-3 py-1 bg-orange-600 text-white rounded">
      ‚Üê Back
    </button>
  </section>

<script>
const categoriesEl = document.getElementById("categories");
const mealsEl = document.getElementById("meals");
const mealDetailsEl = document.getElementById("mealDetails");
const mealContentEl = document.getElementById("mealContent");
const searchBtn = document.getElementById("searchBtn");
const searchInput = document.getElementById("searchInput");

// Show loading text
function showLoading(el) {
  el.innerHTML = `<p class="text-center text-gray-500">Loading...</p>`;
}

// Load categories
fetch("https://www.themealdb.com/api/json/v1/1/categories.php")
  .then(res => res.json())
  .then(data => {
    categoriesEl.innerHTML = data.categories.map(cat => `
      <div onclick="getMeals('${cat.strCategory}')" 
        class="cursor-pointer bg-white rounded-lg shadow hover:scale-105 transition p-2">
        <img src="${cat.strCategoryThumb}" class="rounded-lg w-full h-32 object-cover">
        <h3 class="mt-2 text-center font-semibold">${cat.strCategory}</h3>
      </div>
    `).join("");
  });

// Get meals by category
function getMeals(category) {
  showLoading(mealsEl);
  fetch(`https://www.themealdb.com/api/json/v1/1/filter.php?c=${category}`)
    .then(res => res.json())
    .then(data => {
      mealsEl.innerHTML = data.meals.map(meal => `
        <div onclick="getMealDetails(${meal.idMeal})" 
          class="cursor-pointer bg-white rounded-lg shadow hover:scale-105 transition p-2">
          <img src="${meal.strMealThumb}" class="rounded-lg w-full h-32 object-cover">
          <h3 class="mt-2 text-center font-semibold">${meal.strMeal}</h3>
        </div>
      `).join("");
      mealDetailsEl.classList.add("hidden");
    });
}

// Get meal details
function getMealDetails(id) {
  showLoading(mealContentEl);
  fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`)
    .then(res => res.json())
    .then(data => {
      const meal = data.meals[0];
      const ingredients = [];
      for (let i = 1; i <= 20; i++) {
        if (meal[`strIngredient${i}`]) {
          ingredients.push(`${meal[`strIngredient${i}`]} - ${meal[`strMeasure${i}`]}`);
        }
      }
      mealContentEl.innerHTML = `
        <h2 class="text-2xl font-bold mb-2">${meal.strMeal}</h2>
        <img src="${meal.strMealThumb}" class="rounded-lg w-full md:w-1/2 object-cover mb-4">
        <p><strong>Category:</strong> ${meal.strCategory}</p>
        <p><strong>Area:</strong> ${meal.strArea}</p>
        <h3 class="mt-4 font-semibold">Ingredients</h3>
        <ul class="list-disc list-inside">
          ${ingredients.map(ing => `<li>${ing}</li>`).join("")}
        </ul>
        <h3 class="mt-4 font-semibold">Instructions</h3>
        <p class="text-justify max-h-60 overflow-y-auto">${meal.strInstructions}</p>
      `;
      mealDetailsEl.classList.remove("hidden");
      window.scrollTo({ top: mealDetailsEl.offsetTop, behavior: "smooth" });
    });
}

// Search meals
searchBtn.addEventListener("click", () => {
  const query = searchInput.value.trim();
  if (!query) return;
  showLoading(mealsEl);
  fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${query}`)
    .then(res => res.json())
    .then(data => {
      if (!data.meals) {
        mealsEl.innerHTML = "<p class='text-red-600'>No meals found!</p>";
        return;
      }
      mealsEl.innerHTML = data.meals.map(meal => `
        <div onclick="getMealDetails(${meal.idMeal})" 
          class="cursor-pointer bg-white rounded-lg shadow hover:scale-105 transition p-2">
          <img src="${meal.strMealThumb}" class="rounded-lg w-full h-32 object-cover">
          <h3 class="mt-2 text-center font-semibold">${meal.strMeal}</h3>
        </div>
      `).join("");
      mealDetailsEl.classList.add("hidden");
    });
});

// Search with Enter key
searchInput.addEventListener("keypress", (e) => {
  if (e.key === "Enter") searchBtn.click();
});
</script>
</body>
</html>
